<% provide(:title, 'Edit profile') %>

<div class="container row justify-content-center g-5 px-5">

  <div class="col-md-7 col-lg-8">
    <h4 class="fw-bold ">Update your profile!</h4>
    <small class="mb-5">
      Update your account's public information?
    </small>

    <%= form_with(model: resource, as: resource_name, url: registration_path(resource_name), method: :put) do |f| %>
      <%= render "devise/shared/error_messages", resource: resource %>>

      <div class="row g-3 mt-4 text-dark">

        <div class="col-sm-6">
          <%= f.label 'Company name', class: 'form-label' %>
          <%= f.text_field :name, class: 'form-control' %>
        </div>

        <%= if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
          <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
        <% end %>

        <div class="col-sm-6">
          <%= f.label :phone, class: 'form-label' %>
          <%= f.telephone_field :phone, class: 'form-control', placeholder: "(024) 0123457" %>
        </div>

        <div class="col-sm-12 mb-2">
          <%= f.label :email_address, class: 'form-label' %>
          <%= f.email_field :email, class: 'form-control', placeholder: "you@example.com" %>
        </div>

        <div class="col-sm-6">
          <%= f.label :password, class: 'form-label' %>
          <%= f.password_field :password, class: 'form-control' %>
        </div>

        <div class="col-sm-6 mb-2">
          <%= f.label :password_confirmation, class: 'form-label' %>
          <%= f.password_field :password_confirmation, class: 'form-control' %>
        </div>

        <div class="col-12">
          <%= f.label :current_password, class: 'form-label' %> <i>(we need your current password to confirm your changes)</i><br />
          <%= f.password_field :current_password, class: 'form-control' %>
        </div>

        <%= f.submit "Save changes", class: "w-100 btn btn-primary btn-lg mb-3" %>

        <span class="text-dark">
            No longer want to use our services?
            <button type="button" class="btn btn-sm btn-warning rounded-pill" data-bs-toggle="modal"
                    data-bs-target="#deleteAccount">Delete my account</button>

          </span>


        <!-- Modal -->
        <div class="modal fade" id="deleteAccount" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Delete your account!</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                Your account will be deactivated for 30 days before it is deleted.
              </div>
              <div class="modal-footer">

                <%= link_to "Delete", registration_path(resource_name), data: { "turbo-method": :delete,
                                                             turbo_confirm: "Are you sure you want to permanently delete your account?" },
                            class: "text-light rounded p-2 bg-danger text-decoration-none" %>

              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>